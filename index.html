<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring Ruang Server</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-server"></i>
                    <h1>Monitoring Ruang Server</h1>
                </div>
                <div class="header-info">
                    <span class="date-display" id="currentDate"></span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
            </button>
            <button class="nav-tab" data-tab="input">
                <i class="fas fa-plus-circle"></i>
                Input Data
            </button>
            <button class="nav-tab" data-tab="history">
                <i class="fas fa-history"></i>
                Riwayat
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section class="tab-content active" id="dashboard">
                <!-- Status Cards -->
                <div class="status-cards">
                    <div class="status-card temperature">
                        <div class="card-icon">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <div class="card-info">
                            <h3>Suhu Rata-rata</h3>
                            <p class="value" id="avgTemp">-- °C</p>
                            <span class="status normal" id="tempStatus">Normal</span>
                        </div>
                    </div>
                    <div class="status-card humidity">
                        <div class="card-icon">
                            <i class="fas fa-water"></i>
                        </div>
                        <div class="card-info">
                            <h3>Kelembaban</h3>
                            <p class="value" id="avgHumidity">-- %</p>
                            <span class="status normal" id="humidityStatus">Normal</span>
                        </div>
                    </div>
                    <div class="status-card power">
                        <div class="card-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="card-info">
                            <h3>Daya Listrik</h3>
                            <p class="value" id="totalPower">-- kW</p>
                            <span class="status normal" id="powerStatus">Normal</span>
                        </div>
                    </div>
                    <div class="status-card devices">
                        <div class="card-icon">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <div class="card-info">
                            <h3>Perangkat Aktif</h3>
                            <p class="value" id="activeDevices">--</p>
                            <span class="status normal" id="deviceStatus">Baik</span>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-line"></i> Grafik Suhu & Kelembaban</h3>
                            <select id="chartPeriod" class="chart-period-select">
                                <option value="7">7 Hari Terakhir</option>
                                <option value="14">14 Hari Terakhir</option>
                                <option value="30">30 Hari Terakhir</option>
                            </select>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="tempHumidityChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-bar"></i> Distribusi Status Perangkat</h3>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="deviceStatusChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="quick-stat-card">
                        <h4><i class="fas fa-exclamation-triangle"></i> Peringatan Aktif</h4>
                        <p class="count" id="activeAlerts">0</p>
                    </div>
                    <div class="quick-stat-card">
                        <h4><i class="fas fa-check-circle"></i> Total Pencatatan</h4>
                        <p class="count" id="totalRecords">0</p>
                    </div>
                    <div class="quick-stat-card">
                        <h4><i class="fas fa-clock"></i> Update Terakhir</h4>
                        <p class="time" id="lastUpdate">--:--</p>
                    </div>
                </div>
            </section>

            <!-- Input Data Section -->
            <section class="tab-content" id="input">
                <div class="input-section">
                    <div class="section-header">
                        <h2><i class="fas fa-plus-circle"></i> Input Data Monitoring</h2>
                    </div>
                    
                    <form id="monitoringForm" class="monitoring-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="entryDate"><i class="fas fa-calendar"></i> Tanggal</label>
                                <input type="date" id="entryDate" name="entryDate" required>
                            </div>
                            <div class="form-group">
                                <label for="entryTime"><i class="fas fa-clock"></i> Waktu</label>
                                <input type="time" id="entryTime" name="entryTime" required>
                            </div>
                        </div>

                        <div class="form-section-title">
                            <h3><i class="fas fa-server"></i> Kondisi Ruangan</h3>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="temperature"><i class="fas fa-thermometer-half"></i> Suhu (°C)</label>
                                <input type="number" id="temperature" name="temperature" step="0.1" placeholder="Contoh: 22.5" required>
                                <span class="input-hint">Range normal: 18-25°C</span>
                            </div>
                            <div class="form-group">
                                <label for="humidity"><i class="fas fa-water"></i> Kelembaban (%)</label>
                                <input type="number" id="humidity" name="humidity" step="0.1" placeholder="Contoh: 45" required>
                                <span class="input-hint">Range normal: 40-60%</span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="acStatus"><i class="fas fa-snowflake"></i> Status AC</label>
                                <select id="acStatus" name="acStatus" required>
                                    <option value="">Pilih Status</option>
                                    <option value="normal">Normal</option>
                                    <option value="maintenance">Maintenance</option>
                                    <option value="rusak">Rusak</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="upsStatus"><i class="fas fa-car-battery"></i> Status UPS</label>
                                <select id="upsStatus" name="upsStatus" required>
                                    <option value="">Pilih Status</option>
                                    <option value="normal">Normal</option>
                                    <option value="low_battery">Baterai Rendah</option>
                                    <option value="maintenance">Maintenance</option>
                                    <option value="rusak">Rusak</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-section-title">
                            <h3><i class="fas fa-desktop"></i> Perangkat</h3>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="rackCount"><i class="fas fa-server"></i> Jumlah Rack</label>
                                <input type="number" id="rackCount" name="rackCount" min="0" placeholder="Jumlah rack" required>
                            </div>
                            <div class="form-group">
                                <label for="activeServers"><i class="fas fa-desktop"></i> Server Aktif</label>
                                <input type="number" id="activeServers" name="activeServers" min="0" placeholder="Server aktif" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="powerUsage"><i class="fas fa-bolt"></i> Penggunaan Daya (kW)</label>
                                <input type="number" id="powerUsage" name="powerUsage" step="0.01" placeholder="Contoh: 5.75" required>
                            </div>
                            <div class="form-group">
                                <label for="fireExtinguisher"><i class="fas fa-fire-extinguisher"></i> Status APAR</label>
                                <select id="fireExtinguisher" name="fireExtinguisher" required>
                                    <option value="">Pilih Status</option>
                                    <option value="siap">Siap Pakai</option>
                                    <option value="expired">Expired</option>
                                    <option value="maintenance">Perlu Maintenance</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-section-title">
                            <h3><i class="fas fa-clipboard"></i> Catatan</h3>
                        </div>

                        <div class="form-group full-width">
                            <label for="notes"><i class="fas fa-pen"></i> Catatan Tambahan</label>
                            <textarea id="notes" name="notes" rows="4" placeholder="Masukkan catatan atau temuan penting..."></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="reset" class="btn btn-secondary">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Simpan Data
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- History Section -->
            <section class="tab-content" id="history">
                <div class="history-section">
                    <div class="section-header">
                        <h2><i class="fas fa-history"></i> Riwayat Monitoring</h2>
                        <div class="export-buttons">
                            <button id="exportExcel" class="btn btn-success">
                                <i class="fas fa-file-excel"></i> Export Excel
                            </button>
                            <button id="exportPDF" class="btn btn-danger">
                                <i class="fas fa-file-pdf"></i> Export PDF
                            </button>
                        </div>
                    </div>

                    <!-- Filter -->
                    <div class="filter-section">
                        <div class="filter-group">
                            <label><i class="fas fa-filter"></i> Filter:</label>
                        </div>
                        <div class="filter-group">
                            <input type="date" id="filterStartDate" placeholder="Tanggal Awal">
                        </div>
                        <div class="filter-group">
                            <input type="date" id="filterEndDate" placeholder="Tanggal Akhir">
                        </div>
                        <button id="applyFilter" class="btn btn-primary">
                            <i class="fas fa-search"></i> Terapkan
                        </button>
                        <button id="resetFilter" class="btn btn-secondary">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>

                    <!-- Data Table -->
                    <div class="table-container">
                        <table class="data-table" id="dataTable">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Tanggal</th>
                                    <th>Waktu</th>
                                    <th>Suhu (°C)</th>
                                    <th>Kelembaban (%)</th>
                                    <th>Status AC</th>
                                    <th>Status UPS</th>
                                    <th>Server Aktif</th>
                                    <th>Daya (kW)</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <!-- Data will be inserted here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="pagination">
                        <!-- Pagination will be inserted here -->
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2024 Monitoring Ruang Server - Sistem Monitoring Terintegrasi</p>
        </footer>
    </div>

    <!-- Modal Edit -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Edit Data Monitoring</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <form id="editForm" class="monitoring-form">
                <input type="hidden" id="editId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editDate"><i class="fas fa-calendar"></i> Tanggal</label>
                        <input type="date" id="editDate" name="editDate" required>
                    </div>
                    <div class="form-group">
                        <label for="editTime"><i class="fas fa-clock"></i> Waktu</label>
                        <input type="time" id="editTime" name="editTime" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editTemperature"><i class="fas fa-thermometer-half"></i> Suhu (°C)</label>
                        <input type="number" id="editTemperature" name="editTemperature" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label for="editHumidity"><i class="fas fa-water"></i> Kelembaban (%)</label>
                        <input type="number" id="editHumidity" name="editHumidity" step="0.1" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editAcStatus"><i class="fas fa-snowflake"></i> Status AC</label>
                        <select id="editAcStatus" name="editAcStatus" required>
                            <option value="normal">Normal</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="rusak">Rusak</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editUpsStatus"><i class="fas fa-car-battery"></i> Status UPS</label>
                        <select id="editUpsStatus" name="editUpsStatus" required>
                            <option value="normal">Normal</option>
                            <option value="low_battery">Baterai Rendah</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="rusak">Rusak</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editActiveServers"><i class="fas fa-desktop"></i> Server Aktif</label>
                        <input type="number" id="editActiveServers" name="editActiveServers" required>
                    </div>
                    <div class="form-group">
                        <label for="editPowerUsage"><i class="fas fa-bolt"></i> Daya (kW)</label>
                        <input type="number" id="editPowerUsage" name="editPowerUsage" step="0.01" required>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEdit">Batal</button>
                    <button type="submit" class="btn btn-primary">Simpan Perubahan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="toastMessage">Berhasil disimpan!</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
